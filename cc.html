import React, { useState, useEffect } from 'react'; import { Search, Phone, User, BatteryCharging, Lock, Package, PhoneCall, History, CheckCircle2, AlertCircle, RefreshCw, ExternalLink, ShieldAlert, Cpu, ChevronRight, Activity, Terminal, MapPin, ShieldCheck, Cloud, Filter, Calendar, FileText, Settings, Wifi, Link as LinkIcon, Box, HardDrive, Info, Map as MapIcon, Bell, MessageSquare, Wrench, Clock, TrendingUp, Zap, Server } from 'lucide-react'; const App = () => { const [currentPage, setCurrentPage] = useState('center'); const [searchQuery, setSearchQuery] = useState(''); const [selectedCustomer, setSelectedCustomer] = useState(null); const [activeServiceTab, setActiveServiceTab] = useState(null); const [lastUpdate, setLastUpdate] = useState(new Date().toLocaleTimeString()); // 定期更新監控時間 useEffect(() => { const timer = setInterval(() => { setLastUpdate(new Date().toLocaleTimeString()); }, 5000); return () => clearInterval(timer); }, []); // 客訴中心 Mock Data - 嚴格遵守原始資料庫欄位 const mockCustomers = [ { id: 'CUST-8801', name: '林大華', phone: '0912345678', community: '天籟之音社區', address: '台北市信義區忠孝東路五段', managerPhone: '02-2345-6789', salesRep: '張小明', services: [ { id: 'intercom', label: '對講機', status: 'error', health: 35, warranty: { hardware: '2025/07/02~2027/07/02', line: '2025/07/02~2026/07/02' }, deviceInfo: { maker: 'Akuvox', model: 'R29C', location: 'B棟B1F大門' }, accessControl: { location: 'B棟B1F大門', maker: 'SOYAL', model: 'AR-725' }, installation: { rainRisk: '否', waterproofBox: '有', acrylicPanel: '有' }, network: { sipStatus: '斷線', disconnectTime: '2025/7/2 09:30', ip: '192.168.1.10', mac: '00:1A:2B:3C:4D:5E' } }, { id: 'charging', label: '充電樁', status: 'online', health: 98, powerBox: { location: 'B3動力箱區', id: '064號動力箱' }, parkingSpot: '064號汽車車位', diagramLink: 'https://map.kingnetsmart.com.tw/diagram/8801', warrantyLevel: '標準保固' }, { id: 'smartCabinet', label: '智慧櫃', status: 'online', health: 100, plan: '旗艦方案', contractPeriod: '2025/07/02~2027/07/02', managerContact: '02-2345-6789' } ], historyRecords: [ { id: 'T-9921', date: '2025/06/15', category: '對講機', issue: '住戶反映按鈕無反應', status: '已結案', technician: '陳技師', result: '更換按鈕面板' }, { id: 'T-9840', date: '2025/05/20', category: 'APP', issue: '推播延遲', status: '已結案', technician: '王工程師', result: '優化伺服器路徑' } ] } ]; // 監控頁面數據 (ESI AIoT Monitoring) const monitoringData = { stats: [ { label: '異常社區', value: '12', color: 'text-red-500', icon: MapIcon }, { label: '離線設備', value: '158', color: 'text-orange-500', icon: Wifi }, { label: '處理中工單', value: '24', color: 'text-blue-500', icon: FileText }, { label: '平均修復時間', value: '4.2h', color: 'text-emerald-500', icon: Clock }, ], alerts: [ { id: 1, level: 'Critical', community: '信義之星', device: 'SIP 伺服器', desc: '主要通訊服務未回應', time: '5m ago' }, { id: 2, level: 'Warning', community: '天籟之音', device: '對講機-B1', desc: '網路封包丟失率過高', time: '12m ago' }, { id: 3, level: 'Warning', community: '大安森林', device: '充電樁 #04', desc: '負載電流異常', time: '20m ago' }, { id: 4, level: 'Info', community: '國泰社區', device: '智慧櫃系統', desc: '軟體版本更新完成', time: '45m ago' }, ] }; const handleSearch = () => { const found = mockCustomers.find(c => c.phone === searchQuery || c.name.includes(searchQuery)); setSelectedCustomer(found || null); if (found) setActiveServiceTab(found.services[0].id); }; const getActiveServiceData = () => { return selectedCustomer?.services.find(s => s.id === activeServiceTab); }; return (
{/* 側邊導航 */}
ESI AIoT 戰情中心
setCurrentPage('center')} className={`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${currentPage === 'center' ? 'bg-blue-600 shadow-lg text-white' : 'text-slate-400 hover:bg-slate-800'}`}> 客訴受理中心 setCurrentPage('monitoring')} className={`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${currentPage === 'monitoring' ? 'bg-blue-600 shadow-lg text-white' : 'text-slate-400 hover:bg-slate-800'}`}> 設備告警監控
{/* 主內容區 */}
{currentPage === 'center' ? ( <>
{searchQuery}
 setSearchQuery(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleSearch()} /> 搜尋資料
{!selectedCustomer ? (
等待搜尋指令

) : (
{/* 左側：社區與窗口基本資料 */}
社區資料庫連線中
{selectedCustomer.community}
窗口姓名

{selectedCustomer.name}

管理室電話

{selectedCustomer.managerPhone}

社區地址

{selectedCustomer.address}

AIOT 聯繫業務 {selectedCustomer.salesRep}
系統服務分項

{selectedCustomer.services.map(svc => ( setActiveServiceTab(svc.id)} className={`w-full flex items-center justify-between p-4 rounded-2xl transition-all duration-200 ${activeServiceTab === svc.id ? 'bg-blue-600 text-white shadow-lg shadow-blue-200 translate-x-1' : 'hover:bg-slate-50 text-slate-600'}`} >
{svc.id === 'intercom' && } {svc.id === 'charging' && } {svc.id === 'smartCabinet' && } {svc.label}
 ))}
{/* 右側：診斷面板與歷史客訴 */}
{getActiveServiceData()?.label} 即時技術欄位
{activeServiceTab === 'intercom' && ( <>
設備保固 (2年)

{getActiveServiceData().warranty.hardware}

線路保固 (1年)

{getActiveServiceData().warranty.line}

對講機型號

{getActiveServiceData().deviceInfo.maker} {getActiveServiceData().deviceInfo.model}

門禁位置

{getActiveServiceData().accessControl.location}

門禁型號

{getActiveServiceData().accessControl.model}

{[ { label: '淋雨風險', val: getActiveServiceData().installation.rainRisk }, { label: '防水盒', val: getActiveServiceData().installation.waterproofBox }, { label: '壓克力背板', val: getActiveServiceData().installation.acrylicPanel } ].map((item, idx) => (
{item.label} {item.val}
))}
SIP 雲端通訊監控 {getActiveServiceData().network.sipStatus}
斷線時間: {getActiveServiceData().network.disconnectTime}

網卡位置: {getActiveServiceData().network.mac}

內部 IP: {getActiveServiceData().network.ip}

)} {activeServiceTab === 'charging' && (
動力箱資訊

{getActiveServiceData().powerBox.location} ({getActiveServiceData().powerBox.id})

車位編號

{getActiveServiceData().parkingSpot}

社區架構圖 (試算表同步)

連結: {getActiveServiceData().diagramLink}

)} {activeServiceTab === 'smartCabinet' && (
導入方案

{getActiveServiceData().plan}

合約期間

{getActiveServiceData().contractPeriod}

管理室聯繫

{getActiveServiceData().managerContact}

)}
{/* 歷史客訴紀錄表格 */}
社區歷史客訴與報修
{selectedCustomer.historyRecords.map((record) => ( ))}
報修日期	類別	描述	狀態	結案結果
{record.date}	{record.category}	{record.issue}	{record.status}	{record.result}
發起新報修工單
)}
) : ( /* 全域設備告警監控 (對齊 ESI Monitoring 內容) */
LIVE MONITORING
AIoT 設備全球監控看板
{lastUpdate}
自動刷新中
{monitoringData.stats.map((stat, i) => (
{stat.label}

{stat.value}

))}
系統負載與數據流量 (即時動態)
{[30, 45, 60, 40, 80, 95, 70, 55, 90, 100, 85, 65, 50, 45, 75, 80, 40, 60, 55, 90, 85, 40, 60, 100].map((h, i) => (
))}
地區告警分佈
{[{a:'北部',h:65,c:'bg-orange-500'},{a:'中部',h:92,c:'bg-emerald-500'},{a:'南部',h:88,c:'bg-emerald-500'},{a:'東部',h:98,c:'bg-blue-400'}].map((r,idx) => (
{r.a}{r.h}%
))}
即時異常事件清單
{monitoringData.alerts.map((alert) => ( ))}
等級	社區名稱	異常對象	描述	時間	診斷
{alert.level}	{alert.community}	{alert.device}	{alert.desc}	{alert.time}	{ setSearchQuery(alert.community); handleSearch(); setCurrentPage('center'); }} className="text-blue-500 hover:underline">查看詳情
)}
